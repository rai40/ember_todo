<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Little ember app</title>
    <script src="/assets/jquery.js" type="text/javascript"></script>
    <script src="/assets/handlebars.js" type="text/javascript"></script>
    <script src="/assets/ember.js" type="text/javascript"></script>
  </head>
  <body>
    <script type="text/javascript">
      //
      // APP
      //
      App = Ember.Application.create();

      //
      // ROUTER
      //
      App.Router.map(function() {
        this.route('about', {path: '/about'})
        this.route('why')
      });

      //
      // CLASSES
      //
      App.Person = Ember.Object.extend({
          firstName: "",
          lastName: "",

          fullName: function() {
            return [this.get("firstName"), this.get('lastName')].join(' ');
          }.property("firstName", "lastName")
        })


      //
      // CONTROLLERS
      //
      App.MeController = Ember.ObjectController.extend({
        content: App.Person.create({
          firstName: "Thorbjørn",
          lastName: "Hermansen"
        })
      });
    </script>


    <script type="text/x-handlebars" id="application">
      <h1>Little Ember App</h1>
      {{partial "menu"}}
      {{outlet}}
    </script>

    <script type="text/x-handlebars" id="_menu">
      <ul>
        <li>{{#linkTo "index"}}Hjem{{/linkTo}}</li>
        <li>{{#linkTo "about"}}Om appen{{/linkTo}}</li>
        <li>{{#linkTo "why"}}Hvorfor?{{/linkTo}}</li>
      </ul>
    </script>


    <script type="text/x-handlebars" id="index">
      {{render "me"}}
    </script>

    <script type="text/x-handlebars" id="about">
      Denne appen er laget av Thorbjørn.
    </script>

    <script type="text/x-handlebars" id="why">
      For å vise Ember.
    </script>


    <script type="text/x-handlebars" id="me">
      Mitt navn er: {{fullName}}
      <div>
        <label>
          Fornavn
          {{view Ember.TextField valueBinding="firstName"}}
        </label>
      </div>

      <div>
        <label>
          Fornavn
          {{view Ember.TextField valueBinding="lastName"}}
        </label>
      </div>
    </script>

  </body>
</html>
